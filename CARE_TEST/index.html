<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=500" />
  <meta name="keywords" content="ScrollMagic, example, scrolling, attaching, scrollbar, horizontal, landscape" />
  <title>Parallax Test</title>

  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic|Josefin+Slab:400,700italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="../css/reset.css" type="text/css">
  <link rel="stylesheet" href="../css/modal.css" type="text/css">
  <link rel="stylesheet" href="../css/normalize.css" type="text/css">
  <link rel="stylesheet" href="../css/style.css" type="text/css">
  <link rel="stylesheet" href="../css/parallax.css" type="text/css">
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon">

  <script type="text/javascript" src="../js/lib/jquery.min.js"></script>
  <script type="text/javascript" src="../js/lib/highlight.pack.js"></script>
  <script type="text/javascript" src="../js/lib/modernizr.custom.min.js"></script>
  <script type="text/javascript" src="../js/examples.js"></script>
  <script type="text/javascript" src="../js/lib/velocity.min.js"></script>

  <script type="text/javascript" src="../js/lib/greensock/TweenMax.min.js"></script>
  <script type="text/javascript" src="../scrollmagic/uncompressed/ScrollMagic.js"></script>
  <script type="text/javascript" src="../scrollmagic/uncompressed/plugins/animation.gsap.js"></script>
  <script type="text/javascript" src="../scrollmagic/uncompressed/plugins/animation.velocity.js"></script>
  <script type="text/javascript" src="../scrollmagic/uncompressed/plugins/debug.addIndicators.js"></script>

</head>


<body>
  <div id="content-wrapper">
    <div id="example-wrapper" class="horizontal">
      <div id="parallaxContainer">
      <div class="scrollContent">


        <div class="layer1">
        <section id="titlechart">
          <div id="description">
            <h1 class="badge alpha">The Mayi</h1>
            <h2>Scroll to move to the right and explore our stories.</h2>
            <p>
              Learn about CARE's work in Malawi, and how they're empowering communities to work together to improve maternal healthcare.
            </p>
          </div>
        </section>
        <section class="demo">



        </div> <!-- LAYER 1 END -->


        <div class="layer2">
          <div class="spacer s05"></div>
          <div id="stick_trigger" class="spacer s0"></div>
          <div id="sticker" class="box2 blue">
            <h5>Stuck on Layer 2</h5>
          </div>
        </div> <!-- END LAYER 2 -->
        <div class="layer3">
          <div class="spacer s8"></div>
          <div id="titleFade" class="spacer s0"></div>
          <a id="child1" href="#" onclick="pipe1();"></a>
          <div class="spacer s2"></div>
          <div id="trigger" class="spacer s0"></div>
          <div id="trigger2" class="spacer s0"></div>

        <section class="cd-section">
          <a href="#" id="target" data-type="modal-trigger" class="box2 black btn">
            <h4>Here's a story.</h4>
          </a>

          <span class="cd-modal-bg"></span>


          <div class="cd-modal">
            <div class="cd-modal-content">
              <iframe src="https://player.vimeo.com/video/118394841?color=e4782e&portrait=0&badge=0" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
              <p> &#60;3 &#60;3 ERIN MCGATHY &#60;3 &#60;3 </p>

            </div> <!-- cd-modal-content -->
          </div> <!-- cd-modal -->

          <a href="#" class="cd-modal-close">Close</a>
        </section>

          <div class="spacer s2"></div>

          <a id="mother1" href="#" onclick="pipe2();"></a>
          <div class="spacer s2"></div>
          <div id="trigger3" class="spacer s0"></div>
          <div id="trigger4" class="spacer s0"></div>

        <section class="cd-section">
          <a href="#" id="story2" data-type="modal-trigger" class="box2 black btn">
            <h4>Here's a story.</h4>
          </a>

          <span class="cd-modal-bg"></span>


          <div class="cd-modal">
            <div class="cd-modal-content">
              <p>Second article would go here. </p>

            </div> <!-- cd-modal-content -->
          </div> <!-- cd-modal -->

          <a href="#" class="cd-modal-close">Close</a>
        </section>



        </div> <!-- END LAYER 3 -->



          <script>
            // init controller
            var controller = new ScrollMagic.Controller({vertical: false});

            // build tween
            var tween = TweenMax.to("#target", 0.5, {backgroundColor: "#e4782e" , width: "+=100"});

            // build scene
            var scene = new ScrollMagic.Scene({triggerElement: "#trigger", duration: 250})
                    .setTween(tween)

                  //  .addIndicators() // add indicators (requires plugin)
                    .addTo(controller);
          </script>
          <script>

            // build tween
            var tween = TweenMax.to("#target", 0.5, {backgroundColor: "#231d1f" , width: "-=100"});

            // build scene
            var scene = new ScrollMagic.Scene({triggerElement: "#trigger2", duration: 250, offset: 400})
                    .setTween(tween)
                    //.addIndicators() // add indicators (requires plugin)
                    .addTo(controller);
          </script>
          <script>


            var scene = new ScrollMagic.Scene({triggerElement: "stick_trigger", duration: 5000})
                    .setPin("#sticker")
                    //.addIndicators()
                    .addTo(controller);
          </script>
          <script> // BEGIN SECOND STORY TARGET

            // build tween
            var tween = TweenMax.to("#story2", 0.5, {backgroundColor: "#e4782e" , width: "+=100"});

            // build scene
            var scene = new ScrollMagic.Scene({triggerElement: "#trigger3", duration: 250})
                    .setTween(tween)

                  //  .addIndicators() // add indicators (requires plugin)
                    .addTo(controller);
          </script>
          <script>

            // build tween
            var tween = TweenMax.to("#story2", 0.5, {backgroundColor: "#231d1f" , width: "-=100"});

            // build scene
            var scene = new ScrollMagic.Scene({triggerElement: "#trigger4", duration: 250, offset: 400})
                    .setTween(tween)
                    //.addIndicators() // add indicators (requires plugin)
                    .addTo(controller);
          </script>
          <script>
            // build tween
            var tween = new TimelineMax ()
              .add([
                TweenMax.to("#parallaxContainer .layer1", 1, {backgroundPosition: "-40% 0", ease: Linear.easeNone}),
                TweenMax.to("#parallaxContainer .layer2", 1, {backgroundPosition: "-500% 0", ease: Linear.easeNone}),
                TweenMax.to("#parallaxContainer .layer3", 1, {backgroundPosition: "-225% 0", ease: Linear.easeNone})
              ]);

            // build scene
            var scene = new ScrollMagic.Scene({triggerElement: "#parallaxContainer", duration: 5760})
                    .setTween(tween)
                    //.setPin("#parallaxContainer")
                    //.addIndicators() // add indicators (requires plugin)
                    .addTo(controller);
          </script>
          <script>
            var scene = new ScrollMagic.Scene({triggerElement: "#titleFade"})
                    // trigger a velocity opaticy animation
                    .setVelocity("#titlechart", {opacity: 0}, {duration: 500})
                    //.addIndicators() // add indicators (requires plugin)
                    .addTo(controller);
          </script>
          <script>
          function pipe1(){
            $('#target').click();
            console.log('Piped');
          }

          function pipe2(){
            $('#story2').click();
          }
          </script>
        </section>
        <!-- <div class="spacer s_viewport"></div> -->
      </div><!-- Scroll Container -->
    </div><!-- Parrallax Container -->
  </div><!-- Example Wrapper -->
</div><!-- Content Wrapper -->
  <script type="text/javascript" src="../js/tracking.js"></script>
  <script type="text/javascript" src="../js/modal.js"></script>
</body>


</html>
